{% load static%} 

<!doctype html>
<!--
* Tabler - Premium and Open Source dashboard template with responsive and high quality UI.
* @version 1.0.0-beta20
* @link https://tabler.io
* Copyright 2018-2023 The Tabler Authors
* Copyright 2018-2023 codecalm.net PaweÅ‚ Kuna
* Licensed under MIT (https://github.com/tabler/tabler/blob/master/LICENSE)
-->
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
    <meta http-equiv="X-UA-Compatible" content="ie=edge"/>
    <title>NanoGene</title>
    <link href="{% static '/img/flavicon_verde.png' %}" rel="shortcut icon" type="image/x-icon">

    <!-- CSS files -->
    <link href="{% static 'static_dashboard/css/tabler.css' %}?1692870487" rel="stylesheet"/>
    <link href="{% static 'static_dashboard/css/tabler-flags.css' %}?1692870487" rel="stylesheet"/>
    <link href="{% static 'static_dashboard/css/tabler-payments.css' %}?1692870487" rel="stylesheet"/>
    <link href="{% static 'static_dashboard/css/tabler-vendors.css' %}?1692870487" rel="stylesheet"/>
    <link href="{% static 'static_dashboard/css/demo.css' %}?1692870487" rel="stylesheet"/>
    <style>
        @import url('https://rsms.me/inter/inter.css');
        :root { --tblr-font-sans-serif: 'Inter Var', -apple-system, BlinkMacSystemFont, San Francisco, Segoe UI, Roboto, Helvetica Neue, sans-serif; }
        body { font-feature-settings: "cv03", "cv04", "cv11"; }
    </style>
    
    <!-- Libs JS -->
    <script src="{% static 'static_dashboard/js/apexcharts.js' %}?1692870487" defer></script>
    <script src="{% static 'static_dashboard/js/jsvectormap.js' %}?1692870487" defer></script>
    <script src="{% static 'static_dashboard/js/world.js' %}?1692870487" defer></script>
    <script src="{% static 'static_dashboard/js/world-merc.js' %}?1692870487" defer></script>

    <!--      -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.3.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.10.2/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.1.0/js/bootstrap.min.js"></script>
    
    <!-- Tabler Core -->
    <script src="{% static 'static_dashboard/js/tabler.min.js' %}?1692870487" defer></script>
    <script src="{% static 'static_dashboard/js/demo.min.js' %}?1692870487" defer></script>
</head>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>

<body>
    <script src="{% static 'static_dashboard/js/demo-theme.min.js' %}?1692870487"></script>
    <div class="page">
        <!-- Navbar -->
        <header class="navbar navbar-expand-md d-print-none" data-bs-theme="dark">
          <div class="container-xl ">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <h1 class="navbar-brand navbar-brand-autodark d-none-navbar-horizontal pe-0 pe-md-3">
              <a href="\">
                <img src="{% static '/img/logo_light.svg' %}" width="110" height="32" alt="Tabler" class="navbar-brand-image">
              </a>
            </h1>
            <div class="navbar-nav flex-row order-md-last">
              <div class="d-none d-md-flex">
                <a href="?theme=dark" class="nav-link px-0 hide-theme-dark" title="Enable dark mode" data-bs-toggle="tooltip" data-bs-placement="bottom">
                  <!-- Download SVG icon from http://tabler-icons.io/i/moon -->
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" /></svg>
                </a>
                <a href="?theme=light" class="nav-link px-0 hide-theme-light" title="Enable light mode" data-bs-toggle="tooltip" data-bs-placement="bottom">
                  <!-- Download SVG icon from http://tabler-icons.io/i/sun -->
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0" /><path d="M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7" /></svg>
                </a>
              </div>
              <!-- Usuario -->
              <div class="nav-item dropdown">
                <a href="#" class="nav-link d-flex lh-1 text-reset p-0" data-bs-toggle="dropdown" aria-label="Open user menu">
                  <span class="avatar avatar-sm">
                    <img src="{{ user_profile.profile_image }}" alt="Avatar" style="width: 100%; height: 100%; --tblr-avatar-size:4rem">
                </span>
                  <div class="d-none d-xl-block ps-2">
                    <div>{{ user.first_name }} {{ user.last_name }}</div>
                    <div class="mt-1 small text-secondary">{{ user_profile.profission }}</div>
                  </div>
                </a>
                <div class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
                  <a href="/dashboard" class="dropdown-item">Go to Dashboard</a>
                  <form action="{% url 'logout' %}" method="post">
                    {% csrf_token %}
                    <button type="submit" class="dropdown-item" style="color:red">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-logout">
                            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                            <path d="M14 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2"/>
                            <path d="M9 12h12l-3 -3"/>
                            <path d="M18 15l3 -3"/>
                        </svg>
                        Logout
                    </button>
                </form>
              </div>
            </div>
          </div>
        </header>
        
        <header class="navbar-expand-md" data-bs-theme="dark">
            <div class="collapse navbar-collapse" id="navbar-menu">
              <div class="navbar">
                <div class="container-xl">
                  <ul class="navbar-nav">
                    <li class="nav-item">
                      <a class="nav-link" href="/" >
                        <span class="nav-link-icon d-md-none d-lg-inline-block"><!-- Download SVG icon from http://tabler-icons.io/i/home -->
                          <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12l-2 0l9 -9l9 9l-2 0" /><path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" /><path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" /></svg>
                        </span>
                        <span class="nav-link-title">
                          Home
                        </span>
                      </a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#navbar-help" data-bs-toggle="dropdown" data-bs-auto-close="outside" role="button" aria-expanded="false" >
                          <span class="nav-link-icon d-md-none d-lg-inline-block"><!-- Download SVG icon from http://tabler-icons.io/i/star -->
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z" /></svg>
                          </span>
                          <span class="nav-link-title">
                            Resources
                          </span>
                        </a>
                        <div class="dropdown-menu">
                          <a class="dropdown-item" href="/projects" target="_blank" rel="noopener">
                            Projects
                          </a>
                          <a class="dropdown-item" href="/tools">
                            Tools
                          </a>
                          <a class="dropdown-item" href="https://github.com/CatarinaRRF/IC_design_de_siRNA" target="_blank" rel="noopener">
                            Source code
                          </a>
                        </div>
                      </li>
                      <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#navbar-help" data-bs-toggle="dropdown" data-bs-auto-close="outside" role="button" aria-expanded="false" >
                          <span class="nav-link-icon d-md-none d-lg-inline-block"><!-- Download SVG icon from http://tabler-icons.io/i/lifebuoy -->
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0" /><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M15 15l3.35 3.35" /><path d="M9 15l-3.35 3.35" /><path d="M5.65 5.65l3.35 3.35" /><path d="M18.35 5.65l-3.35 3.35" /></svg>
                          </span>
                          <span class="nav-link-title">
                            Help
                          </span>
                        </a>
                        <div class="dropdown-menu">
                          <a class="dropdown-item" href="/documentation" target="_blank" rel="noopener">
                            Documentation
                          </a>
                          <a class="dropdown-item" href="/faq">
                            FAQ
                          </a>
                        </div>
                      </li>
                  </ul>
                </div>
            </div>
        </header>


        <!--Conteudo-->
        <div class="page-wrapper">
          <div class="page-header">
              {% if messages %}
              <div class="container-xl">
                  <div class="alert alert-important alert-info alert-dismissible" role="alert" style="padding-bottom: 0.15px;">
                    <div class="d-flex">
                      <div>
                        <!-- Download SVG icon from http://tabler-icons.io/i/info-circle -->
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon alert-icon"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0"></path><path d="M12 9h.01"></path><path d="M11 12h1v4h1"></path></svg>
                      </div>
                      <div>
                        {% for message in messages %}
                            <p>{{ message }}</p>
                        {% endfor %}
                      </div>
                    </div>
                    <a class="btn-close" data-bs-dismiss="alert" aria-label="close"></a>
                  </div>
              </div>
              {% endif %}

              <!-- Infomacao user --> 
              <div class="container">
                <div class="row align-items-center">
                  <div class="col-auto">
                      <span class="avatar avatar-lg rounded" style="background-image: url('{{ user_profile.profile_image }}')"></span>
                  </div>
                  <div class="col">
                      <h1 class="fw-bold" style="margin-bottom:0px;margin-top:20px">{{ user_profile.name }} </h1>
                    <div class="my-2"> {{ user_profile.profission }} 
                    </div>
                    <div class="list-inline list-inline-dots text-secondary">
                      <div class="list-inline-item">
                        <!-- Download SVG icon from http://tabler-icons.io/i/map -->
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-inline" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 7l6 -3l6 3l6 -3v13l-6 3l-6 -3l-6 3v-13" /><path d="M9 4v13" /><path d="M15 7v13" /></svg>
                        {{ user_profile.institution }} 
                      </div>
                      <div class="list-inline-item">
                                <!-- Email -->
                              <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-inline" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                <path stroke="none" d="M0 0h24V0z" fill="none" />
                                <path d="M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z" />
                                <path d="M3 7l9 6l9 -6" />
                                </svg>
                                {{ user_profile.email }}
                      </div>
                      <div class="list-inline-item">
                        <!-- Download SVG icon from http://tabler-icons.io/i/cake -->
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-inline" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 20h18v-8a3 3 0 0 0 -3 -3h-12a3 3 0 0 0 -3 3v8z" /><path d="M3 14.803c.312 .135 .654 .204 1 .197a2.4 2.4 0 0 0 2 -1a2.4 2.4 0 0 1 2 -1a2.4 2.4 0 0 1 2 1a2.4 2.4 0 0 0 2 1a2.4 2.4 0 0 0 2 -1a2.4 2.4 0 0 1 2 -1a2.4 2.4 0 0 1 2 1a2.4 2.4 0 0 0 2 1c.35 .007 .692 -.062 1 -.197" /><path d="M12 4l1.465 1.638a2 2 0 1 1 -3.015 .099l1.55 -1.737z" /></svg>
                        {{user_profile.account_anni|date:"j/n/Y"}}
                      </div>
                    </div>
                  </div>
                  <div class="col-auto ms-auto">
                    <div class="btn-list">
                          <!-- Nova Busca -->              
                          <a href="/sirna/search/" class="btn btn-primary d-none d-sm-inline-block">
                            <!-- Download SVG icon from http://tabler-icons.io/i/plus -->
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                                <path d="M12 5l0 14"/>
                                <path d="M5 12l14 0"/>
                            </svg>
                            New search
                          </a>
                      <!-- BotÃ£o de configuraÃ§Ãµes -->
                      <a href="#" class="btn btn-icon" data-bs-toggle="modal" data-bs-target="#modal-config">
                        <!-- Download SVG icon from http://tabler-icons.io/i/message -->
                        <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-settings"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z" /><path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /></svg>
                      </a>
                      <!-- Modal de configuraÃ§Ãµes -->
                      <form method="POST" action="{% url 'profile' %}">
                        {% csrf_token %}
                        <div class="modal fade" id="modal-config" tabindex="-1" aria-labelledby="modal-config-label" aria-hidden="true">
                          <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
                            <div class="modal-content">
                              <div class="modal-header">
                                <h5 class="modal-title" id="modal-config-label">Profile Settings</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                              </div>
                              <div class="modal-body">
                                <!-- Profession field -->
                                <div class="mb-3">
                                  <label class="form-label" for="{{ form.profission.id_for_label }}">Profession</label>
                                  {{ form.profission }}
                                </div>
                      
                                <!-- Institution field -->
                                <div class="mb-3">
                                  <label class="form-label" for="{{ form.institution.id_for_label }}">Institution</label>
                                  {{ form.institution }}
                                </div>
                      
                                <!-- Profile Image Selection -->
                              <div class="mb-3">
                                <label class="form-label" for="profile-image">Profile Picture</label>
                                <div class="row">
                                  <!-- 16 imagens de perfil -->
                                  <div class="col-2" style="margin:10px">
                                    <img src="/static/img/avatars/1.png" class="img-thumbnail avatar-img" alt="Avatar 1" data-id="1" onclick="selectImage(1)" id="avatar-1">
                                  </div>
                                  <div class="col-2" style="margin:10px">
                                    <img src="/static/img/avatars/2.png" class="img-thumbnail avatar-img" alt="Avatar 2" data-id="2" onclick="selectImage(2)" id="avatar-2">
                                  </div>
                                  <div class="col-2" style="margin:10px">
                                    <img src="/static/img/avatars/3.png" class="img-thumbnail avatar-img" alt="Avatar 3" data-id="3" onclick="selectImage(3)" id="avatar-3">
                                  </div>
                                  <div class="col-2" style="margin:10px">
                                    <img src="/static/img/avatars/4.png" class="img-thumbnail avatar-img" alt="Avatar 4" data-id="4" onclick="selectImage(4)" id="avatar-4">
                                  </div>
                                  <div class="col-2" style="margin:10px">
                                    <img src="/static/img/avatars/5.png" class="img-thumbnail avatar-img" alt="Avatar 5" data-id="5" onclick="selectImage(5)" id="avatar-5">
                                  </div>
                                  <div class="col-2" style="margin:10px">
                                    <img src="/static/img/avatars/6.png" class="img-thumbnail avatar-img" alt="Avatar 6" data-id="6" onclick="selectImage(6)" id="avatar-6">
                                  </div>
                                  <div class="col-2" style="margin:10px">
                                    <img src="/static/img/avatars/7.png" class="img-thumbnail avatar-img" alt="Avatar 7" data-id="7" onclick="selectImage(7)" id="avatar-7">
                                  </div>
                                  <div class="col-2" style="margin:10px">
                                    <img src="/static/img/avatars/8.png" class="img-thumbnail avatar-img" alt="Avatar 8" data-id="8" onclick="selectImage(8)" id="avatar-8">
                                  </div>
                                  <div class="col-2" style="margin:10px">
                                    <img src="/static/img/avatars/9.png" class="img-thumbnail avatar-img" alt="Avatar 9" data-id="9" onclick="selectImage(9)" id="avatar-9">
                                  </div>
                                  <div class="col-2" style="margin:10px">
                                    <img src="/static/img/avatars/10.png" class="img-thumbnail avatar-img" alt="Avatar 10" data-id="10" onclick="selectImage(10)" id="avatar-10">
                                  </div>
                                  <div class="col-2" style="margin:10px">
                                    <img src="/static/img/avatars/11.png" class="img-thumbnail avatar-img" alt="Avatar 11" data-id="11" onclick="selectImage(11)" id="avatar-11">
                                  </div>
                                  <div class="col-2" style="margin:10px">
                                    <img src="/static/img/avatars/12.png" class="img-thumbnail avatar-img" alt="Avatar 12" data-id="12" onclick="selectImage(12)" id="avatar-12">
                                  </div>
                                  <div class="col-2" style="margin:10px">
                                    <img src="/static/img/avatars/13.png" class="img-thumbnail avatar-img" alt="Avatar 13" data-id="13" onclick="selectImage(13)" id="avatar-13">
                                  </div>
                                  <div class="col-2" style="margin:10px">
                                    <img src="/static/img/avatars/14.png" class="img-thumbnail avatar-img" alt="Avatar 14" data-id="14" onclick="selectImage(14)" id="avatar-14">
                                  </div>
                                  <div class="col-2" style="margin:10px">
                                    <img src="/static/img/avatars/15.png" class="img-thumbnail avatar-img" alt="Avatar 15" data-id="15" onclick="selectImage(15)" id="avatar-15">
                                  </div>
                                  <div class="col-2" style="margin:10px">
                                    <img src="/static/img/avatars/16.png" class="img-thumbnail avatar-img" alt="Avatar 16" data-id="16" onclick="selectImage(16)" id="avatar-16">
                                  </div>
                                </div>
                                <input type="hidden" name="profile_image" id="profile_image" value="{{ user_profile.profile_image }}">
                              </div>
                              <div class="modal-footer">
                                <button type="button" class="btn btn-link link-secondary" data-bs-dismiss="modal">Cancel</button>
                                <button type="submit" class="btn btn-primary">Save</button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </form>
                      
                      <script>
                        // FunÃ§Ã£o chamada ao clicar em uma imagem
                        function selectImage(id) {
                          // Atualiza o valor do campo oculto com o caminho da imagem
                          const inputField = document.getElementById("profile_image");
                          inputField.value = `/static/img/avatars/${id}.png`;
                      
                          // Remove a classe 'selected' de todas as imagens
                          const images = document.querySelectorAll('.avatar-img');
                          images.forEach(img => {
                            img.classList.remove('selected');
                          });
                      
                          // Adiciona a classe 'selected' Ã  imagem clicada
                          const selectedImage = document.getElementById(`avatar-${id}`);
                          selectedImage.classList.add('selected');
                        }
                      
                        // FunÃ§Ã£o para destacar a imagem selecionada ao carregar a pÃ¡gina
                        document.addEventListener("DOMContentLoaded", function() {
                          const currentImage = document.getElementById("profile_image").value; // ObtÃ©m o caminho da imagem atual
                          if (currentImage) {
                            // Extrai o ID da imagem do caminho (exemplo: '/static/img/avatars/1.png' -> '1')
                            const imageId = currentImage.split('/').pop().split('.')[0];
                            
                            // Adiciona a classe 'selected' Ã  imagem correspondente
                            const selectedImage = document.getElementById(`avatar-${imageId}`);
                            if (selectedImage) {
                              selectedImage.classList.add('selected');
                            }
                          }
                        });
                      </script>
                    </div>
                  </div>
                </div>
              </div>
              
              <!-- Page body -->
              <div class="page-body">
                <div class="container-xl">
                  <div class="row g-3">
                    <div class="col">
                      {% if tasks %}
                          <ul class="timeline">
                              {% for task in tasks %}
                                  <li class="timeline-event">
                                      <div class="timeline-event-icon bg-lime-lt">
                                          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-player-eject">
                                              <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                              <path d="M5 12h14l-7 -8z" />
                                              <path d="M5 16m0 1a1 1 0 0 1 1 -1h12a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-12a1 1 0 0 1 -1 -1z" />
                                          </svg>
                                      </div>
                                      <div class="card timeline-event-card">
                                          <div class="card-body">
                                              <div class="text-secondary float-end">
                                                  {{ task.created|date:"d M Y H:i" }}
                                              </div>
                                              <h4>{{ task.name }}</h4>
                                              <p class="text-secondary">
                                                  Status: <strong>{{ task.status }}</strong>
                                              </p>
                                              {% if task.is_running %}
                                              <div>
                                                <!-- Progress Bar -->
                                                  <div class="progress progress-sm mb-2" style="height: 30%;">
                                                    <div id='progress-bar' class='progress-bar bg-green'>&nbsp;</div>
                                                  </div> 
                                                  <script src="{% static 'celery_progress/celery_progress.js' %}"></script>
                                                  <script>
                                                      document.addEventListener("DOMContentLoaded", function () {
                                                          var progressUrl = "{% url 'celery_progress:task_status' task.task_id  %}";
                                                          CeleryProgressBar.initProgressBar(progressUrl, {
                                                              onSuccess: function (result) {
                                                                  var message = "Success! The task completed successfully.";
                                                                  document.getElementById('progress-bar-message-{{ task.task_id }}').textContent = message;
                                                              }
                                                          });
                                                      });
                                                  </script>
                                              </div>
                                              {% endif %}
                                                <div class="btn-list" style="float: right; width: 30%;">
                                                    <a href="{% url 'dashboard' %}?query_id={{ task.id }}" class="btn btn-dark d-none d-sm-inline-block" {% if task.is_running %} aria-disabled="true" tabindex="-1"{% endif %}>
                                                      <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-eye-share"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" /><path d="M12.597 17.981a9.467 9.467 0 0 1 -.597 .019c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.205 .342 -.415 .67 -.63 .983" /><path d="M16 22l5 -5" /><path d="M21 21.5v-4.5h-4.5" /></svg>
                                                    See result
                                                    </a>
                                                    <form method="POST" action="{% url 'profile' %}">
                                                      {% csrf_token %}
                                                      <input type="hidden" name="delete_task" value="true">
                                                      <input type="hidden" name="task_id" value="{{ task.task_id }}">
                                                      <button type="submit" class="btn btn-outline-danger" style="padding-right:1.4%" 
                                                              onclick="return confirm('Are you sure you want to delete this task?')">
                                                          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" 
                                                               stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" 
                                                               class="icon icon-tabler icons-tabler-outline icon-tabler-trash">
                                                              <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                                                              <path d="M4 7l16 0"/>
                                                              <path d="M10 11l0 6"/>
                                                              <path d="M14 11l0 6"/>
                                                              <path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"/>
                                                              <path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"/>
                                                          </svg>
                                                      </button>
                                                  </form>
                                                  
                                                </div>
                                          </div>
                                      </div>
                                  </li>
                              {% endfor %}
                          </ul>
                      {% else %}
                          <ul class="timeline">
                            <li class="timeline-event">
                              <div class="alert alert-warning text-center">
                                  You have not performed any searches yet.
                              </div>
                            </li>
                          </ul>
                      {% endif %}
                  </div>
                  
                    <div class="col-lg-4">
                      <div class="row row-cards">
                        <div class="col-12">
                          <div class="card">
                            <div class="card-body">
                              <form>
                                <div class="card-header">
                                  <h3 class="card-title">Preferences</h3>
                                </div>
                              <div class="card-body">
                                <p class="card-subtitle">Those settings are still in development</p>
                                  <label class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" checked="n" disabled>
                                    <span class="form-check-label">Alert when search is done?</span>
                                  </label>
                                  <label class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" checked="n" disabled>
                                    <span class="form-check-label">Send e-mail to alert?</span>
                                  </label>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
          </div>

        <!-- Footer -->
        <footer class="footer  d-print-none" style=" bottom:0; width:100%;">
            <div class="container-xl">
              
              <div class="col-12 col-lg-auto mt-3 mt-lg-0">
                <ul class="list-inline list-inline-dots mb-0">
                  <li class="list-inline-item">
                    Copyright &copy; 2023
                    <a href="/" class="link-secondary">Nanogene</a>.
                    All rights reserved.
                  </li>
                  <li class="list-inline-item">
                    <a href="https://github.com/CatarinaRRF/siRNA_seeker_0.0.1" class="link-secondary" rel="noopener">
                      v1.0.0-beta
                    </a>
                  </li>
                </ul>
              </div>
            </div>
          </footer>
      </div>
  </body>